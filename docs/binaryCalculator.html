<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Binary Calculator</title>
    <style>
        body {
            width: 33%;
        }

        #res {
            background-color: lightgray;
            border: solid;
            height: 48px;
            font-size: 20px;
        }

        #btns button {
            width: 25%;
            height: 36px;
            font-size: 18px;
            margin: 0;
            float: left;
        }

        #btn0,
        #btn1 {
            background-color: lightgreen;
            color: brown;
        }

        #btnClr,
        #btnEql {
            background-color: darkgreen;
            color: white;
        }

        #btnSum,
        #btnSub,
        #btnMul,
        #btnDiv {
            background-color: black;
            color: red;
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="res"></div>
        <div id="btns">
            <button id="btn0" onclick="clickZero()">0</button>
            <button id="btn1" onclick="clickOne()">1</button>
            <button id="btnClr" onclick="clickClr()">C</button>
            <button id="btnEql" onclick="clickEql()">=</button>
            <button id="btnSum" onclick="clickSum()">+</button>
            <button id="btnSub" onclick="clickSub()">-</button>
            <button id="btnMul" onclick="clickMul()">*</button>
            <button id="btnDiv" onclick="clickDiv()">/</button>
        </div>
    </div>
    <script>
        let res = document.getElementById("res");

        function getOperator() {
            const input = res.innerText;
            if (input.includes('+')) {
                return '+';
            }
            if (input.includes('-')) {
                return '-';
            }
            if (input.includes('*')) {
                return '*';
            }
            if (input.includes('/')) {
                return '/';
            }
        }
        function clickZero() {

            res.innerHTML += '0';
        }

        function clickOne() {

            res.innerHTML += '1';
        }

        function clickSum() {

            res.innerHTML += '+';
        }

        function clickSub() {

            res.innerHTML += '-';
        }

        function clickMul() {

            res.innerHTML += '*';
        }

        function clickDiv() {

            res.innerHTML += '/';
        }

        function clickClr() {
            res.innerHTML = '';
        }
        function getNumber(str) {
            let r = 0;
            for (let i = 0; i < str.length; i++) {
                const n = parseInt(str[i]);
                r = 2 * r + n;
            }
            console.log(r);
            return r;
        }

        function getBinary(num) {
            let r = '';
            while (num > 0) {
                console.log(num);
                const rem = num % 2;
                r = rem + r;
                num = parseInt(num / 2);
            }
            return r;
        }

        function operation(num1, num2, op) {
            if (op === '+') {
                return num1 + num2;
            }
            if (op === '-') {
                return num1 - num2;
            }
            if (op === '*') {
                return num1 * num2;
            }
            if (op === '/') {
                return num1 / num2;
            }
        }

        function clickEql() {
            const operator = getOperator();
            console.log(operator);
            const operatorLoc = res.innerText.indexOf(operator);
            const operand1 = res.innerText.substring(0, operatorLoc);
            const operand2 = res.innerText.substring(operatorLoc + 1, res.innerText.length);
            console.log('op1', operand1, 'number', getNumber(operand1));
            console.log('op2', operand2, 'number', getNumber(operand2));

            const num1 = getNumber(operand1);
            const num2 = getNumber(operand2);
            const resNum = operation(num1, num2, operator);
            console.log('res', resNum);
            console.log('res Binary', getBinary(resNum));
            res.innerHTML = getBinary(resNum);
        }

    </script>
</body>

</html>